"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _mongoose = _interopRequireDefault(require("mongoose"));

var Schema = _mongoose["default"].Schema; // create a schema

var userSchema = new Schema({
  username: {
    type: String,
    required: true,
    unique: true,
    index: true
  },
  password: {
    type: String,
    required: true
  },
  contacts: {
    type: [{
      type: Schema.Types.ObjectId,
      ref: 'User',
      "default": []
    }]
  },
  groups: [{
    type: Schema.Types.ObjectId,
    ref: 'Group',
    "default": []
  }],
  picture: {
    type: String,
    "default": ""
  },
  admin: {
    type: Boolean,
    "default": false,
    required: true
  },
  online: {
    type: Boolean,
    "default": false
  },
  createdAt: Date,
  updatedAt: Date,
  googleId: String,
  thumbnail: String,
  type: String,
  name: String,
  family: String,
  email: String,
  city: String,
  gender: String,
  phone: String,
  active: Boolean
});
userSchema.pre('save', function (next) {
  var currentDate = new Date();
  this.updatedAt = currentDate;
  if (!this.createdAt) this.createdAt = currentDate;
  next();
});

var _default = function _default(db) {
  db.model("User", userSchema);
};

exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb25nb29zZU1vZGVscy91c2VyLmpzIl0sIm5hbWVzIjpbIlNjaGVtYSIsIm1vbmdvb3NlIiwidXNlclNjaGVtYSIsInVzZXJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidW5pcXVlIiwiaW5kZXgiLCJwYXNzd29yZCIsImNvbnRhY3RzIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsImdyb3VwcyIsInBpY3R1cmUiLCJhZG1pbiIsIkJvb2xlYW4iLCJvbmxpbmUiLCJjcmVhdGVkQXQiLCJEYXRlIiwidXBkYXRlZEF0IiwiZ29vZ2xlSWQiLCJ0aHVtYm5haWwiLCJuYW1lIiwiZmFtaWx5IiwiZW1haWwiLCJjaXR5IiwiZ2VuZGVyIiwicGhvbmUiLCJhY3RpdmUiLCJwcmUiLCJuZXh0IiwiY3VycmVudERhdGUiLCJkYiIsIm1vZGVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQSxJQUFNQSxNQUFNLEdBQUdDLHFCQUFTRCxNQUF4QixDLENBR0E7O0FBQ0EsSUFBSUUsVUFBVSxHQUFHLElBQUlGLE1BQUosQ0FBVztBQUN4QkcsRUFBQUEsUUFBUSxFQUFFO0FBQUVDLElBQUFBLElBQUksRUFBRUMsTUFBUjtBQUFnQkMsSUFBQUEsUUFBUSxFQUFFLElBQTFCO0FBQWdDQyxJQUFBQSxNQUFNLEVBQUUsSUFBeEM7QUFBOENDLElBQUFBLEtBQUssRUFBRTtBQUFyRCxHQURjO0FBRXhCQyxFQUFBQSxRQUFRLEVBQUU7QUFBRUwsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxJQUFBQSxRQUFRLEVBQUU7QUFBMUIsR0FGYztBQUd4QkksRUFBQUEsUUFBUSxFQUFFO0FBQUNOLElBQUFBLElBQUksRUFBRSxDQUFFO0FBQUNBLE1BQUFBLElBQUksRUFBRUosTUFBTSxDQUFDVyxLQUFQLENBQWFDLFFBQXBCO0FBQThCQyxNQUFBQSxHQUFHLEVBQUUsTUFBbkM7QUFBMkMsaUJBQVM7QUFBcEQsS0FBRjtBQUFQLEdBSGM7QUFJeEJDLEVBQUFBLE1BQU0sRUFBRSxDQUFFO0FBQUNWLElBQUFBLElBQUksRUFBRUosTUFBTSxDQUFDVyxLQUFQLENBQWFDLFFBQXBCO0FBQThCQyxJQUFBQSxHQUFHLEVBQUUsT0FBbkM7QUFBNkMsZUFBUztBQUF0RCxHQUFGLENBSmdCO0FBS3hCRSxFQUFBQSxPQUFPLEVBQUU7QUFBRVgsSUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCLGVBQVM7QUFBekIsR0FMZTtBQU14QlcsRUFBQUEsS0FBSyxFQUFFO0FBQUVaLElBQUFBLElBQUksRUFBRWEsT0FBUjtBQUFpQixlQUFTLEtBQTFCO0FBQWlDWCxJQUFBQSxRQUFRLEVBQUU7QUFBM0MsR0FOaUI7QUFPeEJZLEVBQUFBLE1BQU0sRUFBRTtBQUFFZCxJQUFBQSxJQUFJLEVBQUVhLE9BQVI7QUFBaUIsZUFBUztBQUExQixHQVBnQjtBQVF4QkUsRUFBQUEsU0FBUyxFQUFFQyxJQVJhO0FBU3hCQyxFQUFBQSxTQUFTLEVBQUVELElBVGE7QUFVeEJFLEVBQUFBLFFBQVEsRUFBRWpCLE1BVmM7QUFXeEJrQixFQUFBQSxTQUFTLEVBQUVsQixNQVhhO0FBWXhCRCxFQUFBQSxJQUFJLEVBQUNDLE1BWm1CO0FBYXhCbUIsRUFBQUEsSUFBSSxFQUFDbkIsTUFibUI7QUFjeEJvQixFQUFBQSxNQUFNLEVBQUNwQixNQWRpQjtBQWV4QnFCLEVBQUFBLEtBQUssRUFBQ3JCLE1BZmtCO0FBZ0J4QnNCLEVBQUFBLElBQUksRUFBRXRCLE1BaEJrQjtBQWlCeEJ1QixFQUFBQSxNQUFNLEVBQUN2QixNQWpCaUI7QUFrQnhCd0IsRUFBQUEsS0FBSyxFQUFDeEIsTUFsQmtCO0FBbUJ4QnlCLEVBQUFBLE1BQU0sRUFBQ2I7QUFuQmlCLENBQVgsQ0FBakI7QUF1QkFmLFVBQVUsQ0FBQzZCLEdBQVgsQ0FBZSxNQUFmLEVBQXVCLFVBQVNDLElBQVQsRUFBZTtBQUNsQyxNQUFJQyxXQUFXLEdBQUcsSUFBSWIsSUFBSixFQUFsQjtBQUNBLE9BQUtDLFNBQUwsR0FBaUJZLFdBQWpCO0FBQ0EsTUFBSSxDQUFDLEtBQUtkLFNBQVYsRUFDSSxLQUFLQSxTQUFMLEdBQWlCYyxXQUFqQjtBQUNKRCxFQUFBQSxJQUFJO0FBQ1AsQ0FORDs7ZUFTZSxrQkFBQUUsRUFBRSxFQUFJO0FBQUVBLEVBQUFBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTLE1BQVQsRUFBaUJqQyxVQUFqQjtBQUE2QixDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hO1xyXG5cclxuXHJcbi8vIGNyZWF0ZSBhIHNjaGVtYVxyXG5sZXQgdXNlclNjaGVtYSA9IG5ldyBTY2hlbWEoe1xyXG4gICAgdXNlcm5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgdW5pcXVlOiB0cnVlLCBpbmRleDogdHJ1ZSB9LFxyXG4gICAgcGFzc3dvcmQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgY29udGFjdHM6IHt0eXBlOiBbIHt0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ1VzZXInLCBkZWZhdWx0OiBbXSB9XSB9LFxyXG4gICAgZ3JvdXBzOiBbIHt0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ0dyb3VwJywgIGRlZmF1bHQ6IFtdIH1dLFxyXG4gICAgcGljdHVyZTogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IFwiXCIgfSxcclxuICAgIGFkbWluOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgb25saW5lOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sXHJcbiAgICBjcmVhdGVkQXQ6IERhdGUsXHJcbiAgICB1cGRhdGVkQXQ6IERhdGUsXHJcbiAgICBnb29nbGVJZDogU3RyaW5nLFxyXG4gICAgdGh1bWJuYWlsOiBTdHJpbmcsXHJcbiAgICB0eXBlOlN0cmluZyxcclxuICAgIG5hbWU6U3RyaW5nLFxyXG4gICAgZmFtaWx5OlN0cmluZywgICBcclxuICAgIGVtYWlsOlN0cmluZyxcclxuICAgIGNpdHkgOlN0cmluZyxcclxuICAgIGdlbmRlcjpTdHJpbmcsXHJcbiAgICBwaG9uZTpTdHJpbmcsXHJcbiAgICBhY3RpdmU6Qm9vbGVhblxyXG59KTtcclxuXHJcblxyXG51c2VyU2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uKG5leHQpIHtcclxuICAgIGxldCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICB0aGlzLnVwZGF0ZWRBdCA9IGN1cnJlbnREYXRlO1xyXG4gICAgaWYgKCF0aGlzLmNyZWF0ZWRBdClcclxuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IGN1cnJlbnREYXRlO1xyXG4gICAgbmV4dCgpO1xyXG59KTtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBkYiA9PiB7IGRiLm1vZGVsKFwiVXNlclwiLCB1c2VyU2NoZW1hKX1cclxuIl19