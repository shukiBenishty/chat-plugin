"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _mongoose = _interopRequireDefault(require("mongoose"));

var Schema = _mongoose["default"].Schema; // create a schema

var userSchema = new Schema({
  name: String,
  username: {
    type: String,
    required: true,
    unique: true,
    index: true
  },
  password: {
    type: String,
    required: true
  },
  contacts: {
    type: [{
      type: Schema.Types.ObjectId,
      ref: 'User',
      "default": []
    }]
  },
  groups: [{
    type: Schema.Types.ObjectId,
    ref: 'Group',
    "default": []
  }],
  picture: {
    type: String,
    "default": ""
  },
  admin: {
    type: Boolean,
    "default": false,
    required: true
  },
  online: {
    type: Boolean,
    "default": false
  },
  createdAt: Date,
  updatedAt: Date
});
userSchema.pre('save', function (next) {
  var currentDate = new Date();
  this.updatedAt = currentDate;
  if (!this.createdAt) this.createdAt = currentDate;
  next();
});

var _default = function _default(db) {
  db.model("User", userSchema);
};

exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb25nb29zZU1vZGVscy91c2VyLmpzIl0sIm5hbWVzIjpbIlNjaGVtYSIsIm1vbmdvb3NlIiwidXNlclNjaGVtYSIsIm5hbWUiLCJTdHJpbmciLCJ1c2VybmFtZSIsInR5cGUiLCJyZXF1aXJlZCIsInVuaXF1ZSIsImluZGV4IiwicGFzc3dvcmQiLCJjb250YWN0cyIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJncm91cHMiLCJwaWN0dXJlIiwiYWRtaW4iLCJCb29sZWFuIiwib25saW5lIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsInByZSIsIm5leHQiLCJjdXJyZW50RGF0ZSIsImRiIiwibW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztBQUNBLElBQU1BLE1BQU0sR0FBR0MscUJBQVNELE1BQXhCLEMsQ0FHQTs7QUFDQSxJQUFJRSxVQUFVLEdBQUcsSUFBSUYsTUFBSixDQUFXO0FBQ3hCRyxFQUFBQSxJQUFJLEVBQUVDLE1BRGtCO0FBRXhCQyxFQUFBQSxRQUFRLEVBQUU7QUFBRUMsSUFBQUEsSUFBSSxFQUFFRixNQUFSO0FBQWdCRyxJQUFBQSxRQUFRLEVBQUUsSUFBMUI7QUFBZ0NDLElBQUFBLE1BQU0sRUFBRSxJQUF4QztBQUE4Q0MsSUFBQUEsS0FBSyxFQUFFO0FBQXJELEdBRmM7QUFHeEJDLEVBQUFBLFFBQVEsRUFBRTtBQUFFSixJQUFBQSxJQUFJLEVBQUVGLE1BQVI7QUFBZ0JHLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUhjO0FBSXhCSSxFQUFBQSxRQUFRLEVBQUU7QUFBQ0wsSUFBQUEsSUFBSSxFQUFFLENBQUU7QUFBQ0EsTUFBQUEsSUFBSSxFQUFFTixNQUFNLENBQUNZLEtBQVAsQ0FBYUMsUUFBcEI7QUFBOEJDLE1BQUFBLEdBQUcsRUFBRSxNQUFuQztBQUEyQyxpQkFBUztBQUFwRCxLQUFGO0FBQVAsR0FKYztBQUt4QkMsRUFBQUEsTUFBTSxFQUFFLENBQUU7QUFBQ1QsSUFBQUEsSUFBSSxFQUFFTixNQUFNLENBQUNZLEtBQVAsQ0FBYUMsUUFBcEI7QUFBOEJDLElBQUFBLEdBQUcsRUFBRSxPQUFuQztBQUE2QyxlQUFTO0FBQXRELEdBQUYsQ0FMZ0I7QUFNeEJFLEVBQUFBLE9BQU8sRUFBRTtBQUFFVixJQUFBQSxJQUFJLEVBQUVGLE1BQVI7QUFBZ0IsZUFBUztBQUF6QixHQU5lO0FBT3hCYSxFQUFBQSxLQUFLLEVBQUU7QUFBRVgsSUFBQUEsSUFBSSxFQUFFWSxPQUFSO0FBQWlCLGVBQVMsS0FBMUI7QUFBaUNYLElBQUFBLFFBQVEsRUFBRTtBQUEzQyxHQVBpQjtBQVF4QlksRUFBQUEsTUFBTSxFQUFFO0FBQUViLElBQUFBLElBQUksRUFBRVksT0FBUjtBQUFpQixlQUFTO0FBQTFCLEdBUmdCO0FBU3hCRSxFQUFBQSxTQUFTLEVBQUVDLElBVGE7QUFVeEJDLEVBQUFBLFNBQVMsRUFBRUQ7QUFWYSxDQUFYLENBQWpCO0FBY0FuQixVQUFVLENBQUNxQixHQUFYLENBQWUsTUFBZixFQUF1QixVQUFTQyxJQUFULEVBQWU7QUFDbEMsTUFBSUMsV0FBVyxHQUFHLElBQUlKLElBQUosRUFBbEI7QUFDQSxPQUFLQyxTQUFMLEdBQWlCRyxXQUFqQjtBQUNBLE1BQUksQ0FBQyxLQUFLTCxTQUFWLEVBQ0ksS0FBS0EsU0FBTCxHQUFpQkssV0FBakI7QUFDSkQsRUFBQUEsSUFBSTtBQUNQLENBTkQ7O2VBU2Usa0JBQUFFLEVBQUUsRUFBSTtBQUFFQSxFQUFBQSxFQUFFLENBQUNDLEtBQUgsQ0FBUyxNQUFULEVBQWlCekIsVUFBakI7QUFBNkIsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XHJcbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYTtcclxuXHJcblxyXG4vLyBjcmVhdGUgYSBzY2hlbWFcclxubGV0IHVzZXJTY2hlbWEgPSBuZXcgU2NoZW1hKHtcclxuICAgIG5hbWU6IFN0cmluZyxcclxuICAgIHVzZXJuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUsIHVuaXF1ZTogdHJ1ZSwgaW5kZXg6IHRydWUgfSxcclxuICAgIHBhc3N3b3JkOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIGNvbnRhY3RzOiB7dHlwZTogWyB7dHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdVc2VyJywgZGVmYXVsdDogW10gfV0gfSxcclxuICAgIGdyb3VwczogWyB7dHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdHcm91cCcsICBkZWZhdWx0OiBbXSB9XSxcclxuICAgIHBpY3R1cmU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcIlwiIH0sXHJcbiAgICBhZG1pbjogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSwgcmVxdWlyZWQ6IHRydWUgfSxcclxuICAgIG9ubGluZTogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxyXG4gICAgY3JlYXRlZEF0OiBEYXRlLFxyXG4gICAgdXBkYXRlZEF0OiBEYXRlXHJcbn0pO1xyXG5cclxuXHJcbnVzZXJTY2hlbWEucHJlKCdzYXZlJywgZnVuY3Rpb24obmV4dCkge1xyXG4gICAgbGV0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgIHRoaXMudXBkYXRlZEF0ID0gY3VycmVudERhdGU7XHJcbiAgICBpZiAoIXRoaXMuY3JlYXRlZEF0KVxyXG4gICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gY3VycmVudERhdGU7XHJcbiAgICBuZXh0KCk7XHJcbn0pO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGRiID0+IHsgZGIubW9kZWwoXCJVc2VyXCIsIHVzZXJTY2hlbWEpfVxyXG4iXX0=