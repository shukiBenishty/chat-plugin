"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _mongoose = _interopRequireDefault(require("mongoose"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var Schema = _mongoose["default"].Schema; // create a schema

var userSchema = new Schema({
  name: String,
  username: {
    type: String,
    required: true,
    unique: true,
    index: true
  },
  password: {
    type: String,
    required: true
  },
  contacts: {
    type: [{
      type: Schema.Types.ObjectId,
      ref: 'User',
      unique: true
    }]
  },
  chatRooms: [{
    type: Schema.Types.ObjectId,
    ref: 'ChatRoom',
    unique: true
  }],
  picture: {
    type: String,
    "default": ""
  },
  admin: {
    type: Boolean,
    "default": false,
    required: true
  },
  createdAt: Date,
  updatedAt: Date
});
userSchema.pre('save', function (next) {
  var currentDate = new Date();
  this.updatedAt = currentDate;
  if (!this.createdAt) this.createdAt = currentDate;
  next();
});

var _default = function _default(db) {
  db.model("User", userSchema);
};

exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb25nb29zZU1vZGVscy91c2VyLmpzIl0sIm5hbWVzIjpbIlNjaGVtYSIsIm1vbmdvb3NlIiwidXNlclNjaGVtYSIsIm5hbWUiLCJTdHJpbmciLCJ1c2VybmFtZSIsInR5cGUiLCJyZXF1aXJlZCIsInVuaXF1ZSIsImluZGV4IiwicGFzc3dvcmQiLCJjb250YWN0cyIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJjaGF0Um9vbXMiLCJwaWN0dXJlIiwiYWRtaW4iLCJCb29sZWFuIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsInByZSIsIm5leHQiLCJjdXJyZW50RGF0ZSIsImRiIiwibW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUNBLElBQU1BLE1BQU0sR0FBR0MscUJBQVNELE1BQXhCLEMsQ0FHQTs7QUFDQSxJQUFJRSxVQUFVLEdBQUcsSUFBSUYsTUFBSixDQUFXO0FBQ3hCRyxFQUFBQSxJQUFJLEVBQUVDLE1BRGtCO0FBRXhCQyxFQUFBQSxRQUFRLEVBQUU7QUFBRUMsSUFBQUEsSUFBSSxFQUFFRixNQUFSO0FBQWdCRyxJQUFBQSxRQUFRLEVBQUUsSUFBMUI7QUFBZ0NDLElBQUFBLE1BQU0sRUFBRSxJQUF4QztBQUE4Q0MsSUFBQUEsS0FBSyxFQUFFO0FBQXJELEdBRmM7QUFHeEJDLEVBQUFBLFFBQVEsRUFBRTtBQUFFSixJQUFBQSxJQUFJLEVBQUVGLE1BQVI7QUFBZ0JHLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUhjO0FBSXhCSSxFQUFBQSxRQUFRLEVBQUU7QUFBQ0wsSUFBQUEsSUFBSSxFQUFFLENBQUU7QUFBQ0EsTUFBQUEsSUFBSSxFQUFFTixNQUFNLENBQUNZLEtBQVAsQ0FBYUMsUUFBcEI7QUFBOEJDLE1BQUFBLEdBQUcsRUFBRSxNQUFuQztBQUEyQ04sTUFBQUEsTUFBTSxFQUFFO0FBQW5ELEtBQUY7QUFBUCxHQUpjO0FBS3hCTyxFQUFBQSxTQUFTLEVBQUUsQ0FBRTtBQUFDVCxJQUFBQSxJQUFJLEVBQUVOLE1BQU0sQ0FBQ1ksS0FBUCxDQUFhQyxRQUFwQjtBQUE4QkMsSUFBQUEsR0FBRyxFQUFFLFVBQW5DO0FBQStDTixJQUFBQSxNQUFNLEVBQUU7QUFBdkQsR0FBRixDQUxhO0FBTXhCUSxFQUFBQSxPQUFPLEVBQUU7QUFBRVYsSUFBQUEsSUFBSSxFQUFFRixNQUFSO0FBQWdCLGVBQVM7QUFBekIsR0FOZTtBQU94QmEsRUFBQUEsS0FBSyxFQUFFO0FBQUVYLElBQUFBLElBQUksRUFBRVksT0FBUjtBQUFpQixlQUFTLEtBQTFCO0FBQWlDWCxJQUFBQSxRQUFRLEVBQUU7QUFBM0MsR0FQaUI7QUFReEJZLEVBQUFBLFNBQVMsRUFBRUMsSUFSYTtBQVN4QkMsRUFBQUEsU0FBUyxFQUFFRDtBQVRhLENBQVgsQ0FBakI7QUFhQWxCLFVBQVUsQ0FBQ29CLEdBQVgsQ0FBZSxNQUFmLEVBQXVCLFVBQVNDLElBQVQsRUFBZTtBQUNsQyxNQUFJQyxXQUFXLEdBQUcsSUFBSUosSUFBSixFQUFsQjtBQUNBLE9BQUtDLFNBQUwsR0FBaUJHLFdBQWpCO0FBQ0EsTUFBSSxDQUFDLEtBQUtMLFNBQVYsRUFDSSxLQUFLQSxTQUFMLEdBQWlCSyxXQUFqQjtBQUNKRCxFQUFBQSxJQUFJO0FBQ1AsQ0FORDs7ZUFTZSxrQkFBQUUsRUFBRSxFQUFJO0FBQUVBLEVBQUFBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTLE1BQVQsRUFBaUJ4QixVQUFqQjtBQUE2QixDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hO1xyXG5cclxuXHJcbi8vIGNyZWF0ZSBhIHNjaGVtYVxyXG5sZXQgdXNlclNjaGVtYSA9IG5ldyBTY2hlbWEoe1xyXG4gICAgbmFtZTogU3RyaW5nLFxyXG4gICAgdXNlcm5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgdW5pcXVlOiB0cnVlLCBpbmRleDogdHJ1ZSB9LFxyXG4gICAgcGFzc3dvcmQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgY29udGFjdHM6IHt0eXBlOiBbIHt0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ1VzZXInLCB1bmlxdWU6IHRydWV9XSB9LFxyXG4gICAgY2hhdFJvb21zOiBbIHt0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ0NoYXRSb29tJywgdW5pcXVlOiB0cnVlfV0sXHJcbiAgICBwaWN0dXJlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJcIiB9LFxyXG4gICAgYWRtaW46IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICBjcmVhdGVkQXQ6IERhdGUsXHJcbiAgICB1cGRhdGVkQXQ6IERhdGVcclxufSk7XHJcblxyXG5cclxudXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBmdW5jdGlvbihuZXh0KSB7XHJcbiAgICBsZXQgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdGhpcy51cGRhdGVkQXQgPSBjdXJyZW50RGF0ZTtcclxuICAgIGlmICghdGhpcy5jcmVhdGVkQXQpXHJcbiAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBjdXJyZW50RGF0ZTtcclxuICAgIG5leHQoKTtcclxufSk7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZGIgPT4geyBkYi5tb2RlbChcIlVzZXJcIiwgdXNlclNjaGVtYSl9XHJcbiJdfQ==