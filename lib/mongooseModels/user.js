"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _mongoose = _interopRequireDefault(require("mongoose"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var Schema = _mongoose["default"].Schema; // create a schema

var userSchema = new Schema({
  name: String,
  username: {
    type: String,
    required: true,
    unique: true,
    index: true
  },
  password: {
    type: String,
    required: true
  },
  contacts: {
    type: [{
      type: Schema.Types.ObjectId,
      ref: 'User',
      "default": [],
      unique: true
    }]
  },
  chatRooms: [{
    type: Schema.Types.ObjectId,
    ref: 'ChatRoom',
    "default": [],
    unique: true
  }],
  picture: {
    type: String,
    "default": ""
  },
  admin: {
    type: Boolean,
    "default": false,
    required: true
  },
  createdAt: Date,
  updatedAt: Date
});
userSchema.pre('save', function (next) {
  var currentDate = new Date();
  this.updatedAt = currentDate;
  if (!this.createdAt) this.createdAt = currentDate;
  next();
});

var _default = function _default(db) {
  db.model("User", userSchema);
};

exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb25nb29zZU1vZGVscy91c2VyLmpzIl0sIm5hbWVzIjpbIlNjaGVtYSIsIm1vbmdvb3NlIiwidXNlclNjaGVtYSIsIm5hbWUiLCJTdHJpbmciLCJ1c2VybmFtZSIsInR5cGUiLCJyZXF1aXJlZCIsInVuaXF1ZSIsImluZGV4IiwicGFzc3dvcmQiLCJjb250YWN0cyIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJjaGF0Um9vbXMiLCJwaWN0dXJlIiwiYWRtaW4iLCJCb29sZWFuIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsInByZSIsIm5leHQiLCJjdXJyZW50RGF0ZSIsImRiIiwibW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUNBLElBQU1BLE1BQU0sR0FBR0MscUJBQVNELE1BQXhCLEMsQ0FHQTs7QUFDQSxJQUFJRSxVQUFVLEdBQUcsSUFBSUYsTUFBSixDQUFXO0FBQ3hCRyxFQUFBQSxJQUFJLEVBQUVDLE1BRGtCO0FBRXhCQyxFQUFBQSxRQUFRLEVBQUU7QUFBRUMsSUFBQUEsSUFBSSxFQUFFRixNQUFSO0FBQWdCRyxJQUFBQSxRQUFRLEVBQUUsSUFBMUI7QUFBZ0NDLElBQUFBLE1BQU0sRUFBRSxJQUF4QztBQUE4Q0MsSUFBQUEsS0FBSyxFQUFFO0FBQXJELEdBRmM7QUFHeEJDLEVBQUFBLFFBQVEsRUFBRTtBQUFFSixJQUFBQSxJQUFJLEVBQUVGLE1BQVI7QUFBZ0JHLElBQUFBLFFBQVEsRUFBRTtBQUExQixHQUhjO0FBSXhCSSxFQUFBQSxRQUFRLEVBQUU7QUFBQ0wsSUFBQUEsSUFBSSxFQUFFLENBQUU7QUFBQ0EsTUFBQUEsSUFBSSxFQUFFTixNQUFNLENBQUNZLEtBQVAsQ0FBYUMsUUFBcEI7QUFBOEJDLE1BQUFBLEdBQUcsRUFBRSxNQUFuQztBQUEyQyxpQkFBUyxFQUFwRDtBQUF3RE4sTUFBQUEsTUFBTSxFQUFFO0FBQWhFLEtBQUY7QUFBUCxHQUpjO0FBS3hCTyxFQUFBQSxTQUFTLEVBQUUsQ0FBRTtBQUFDVCxJQUFBQSxJQUFJLEVBQUVOLE1BQU0sQ0FBQ1ksS0FBUCxDQUFhQyxRQUFwQjtBQUE4QkMsSUFBQUEsR0FBRyxFQUFFLFVBQW5DO0FBQWdELGVBQVMsRUFBekQ7QUFBOEROLElBQUFBLE1BQU0sRUFBRTtBQUF0RSxHQUFGLENBTGE7QUFNeEJRLEVBQUFBLE9BQU8sRUFBRTtBQUFFVixJQUFBQSxJQUFJLEVBQUVGLE1BQVI7QUFBZ0IsZUFBUztBQUF6QixHQU5lO0FBT3hCYSxFQUFBQSxLQUFLLEVBQUU7QUFBRVgsSUFBQUEsSUFBSSxFQUFFWSxPQUFSO0FBQWlCLGVBQVMsS0FBMUI7QUFBaUNYLElBQUFBLFFBQVEsRUFBRTtBQUEzQyxHQVBpQjtBQVF4QlksRUFBQUEsU0FBUyxFQUFFQyxJQVJhO0FBU3hCQyxFQUFBQSxTQUFTLEVBQUVEO0FBVGEsQ0FBWCxDQUFqQjtBQWFBbEIsVUFBVSxDQUFDb0IsR0FBWCxDQUFlLE1BQWYsRUFBdUIsVUFBU0MsSUFBVCxFQUFlO0FBQ2xDLE1BQUlDLFdBQVcsR0FBRyxJQUFJSixJQUFKLEVBQWxCO0FBQ0EsT0FBS0MsU0FBTCxHQUFpQkcsV0FBakI7QUFDQSxNQUFJLENBQUMsS0FBS0wsU0FBVixFQUNJLEtBQUtBLFNBQUwsR0FBaUJLLFdBQWpCO0FBQ0pELEVBQUFBLElBQUk7QUFDUCxDQU5EOztlQVNlLGtCQUFBRSxFQUFFLEVBQUk7QUFBRUEsRUFBQUEsRUFBRSxDQUFDQyxLQUFILENBQVMsTUFBVCxFQUFpQnhCLFVBQWpCO0FBQTZCLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xyXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XHJcblxyXG5cclxuLy8gY3JlYXRlIGEgc2NoZW1hXHJcbmxldCB1c2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XHJcbiAgICBuYW1lOiBTdHJpbmcsXHJcbiAgICB1c2VybmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCB1bmlxdWU6IHRydWUsIGluZGV4OiB0cnVlIH0sXHJcbiAgICBwYXNzd29yZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICBjb250YWN0czoge3R5cGU6IFsge3R5cGU6IFNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnVXNlcicsIGRlZmF1bHQ6IFtdLCB1bmlxdWU6IHRydWV9XSB9LFxyXG4gICAgY2hhdFJvb21zOiBbIHt0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ0NoYXRSb29tJywgIGRlZmF1bHQ6IFtdLCAgdW5pcXVlOiB0cnVlfV0sXHJcbiAgICBwaWN0dXJlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogXCJcIiB9LFxyXG4gICAgYWRtaW46IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgICBjcmVhdGVkQXQ6IERhdGUsXHJcbiAgICB1cGRhdGVkQXQ6IERhdGVcclxufSk7XHJcblxyXG5cclxudXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBmdW5jdGlvbihuZXh0KSB7XHJcbiAgICBsZXQgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdGhpcy51cGRhdGVkQXQgPSBjdXJyZW50RGF0ZTtcclxuICAgIGlmICghdGhpcy5jcmVhdGVkQXQpXHJcbiAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBjdXJyZW50RGF0ZTtcclxuICAgIG5leHQoKTtcclxufSk7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZGIgPT4geyBkYi5tb2RlbChcIlVzZXJcIiwgdXNlclNjaGVtYSl9XHJcbiJdfQ==