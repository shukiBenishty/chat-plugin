"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _mongoose = _interopRequireDefault(require("mongoose"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var Schema = _mongoose["default"].Schema;
var messageSchema = new Schema({
  author: {
    type: Schema.Types.ObjectId,
    ref: 'User',
    required: true,
    index: true
  },
  data: {
    type: Object,
    required: true
  },
  dateSended: {
    type: Date,
    "default": Date.now,
    required: true
  },
  received: {
    type: Boolean,
    "default": false,
    required: true
  },
  readed: {
    type: Boolean,
    "default": false,
    required: true
  },
  likes: [{
    type: String
  }],
  unlikes: [{
    type: String
  }],
  destination: {
    type: Schema.Types.ObjectId,
    required: true,
    refPath: 'destinationModel',
    index: true
  },
  destinationModel: {
    type: String,
    "enum": ['User', 'Group']
  },
  createdAt: Date,
  updatedAt: Date,
  isDeleted: {
    type: Boolean,
    "default": false,
    required: true
  }
});
messageSchema.pre('save', function (next) {
  var currentDate = new Date();
  this.updatedAt = currentDate;
  if (!this.createdAt) this.createdAt = currentDate;
  next();
});

var _default = function _default(db) {
  db.model('Message', messageSchema);
};

exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb25nb29zZU1vZGVscy9tZXNzYWdlLmpzIl0sIm5hbWVzIjpbIlNjaGVtYSIsIm1vbmdvb3NlIiwibWVzc2FnZVNjaGVtYSIsImF1dGhvciIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwicmVxdWlyZWQiLCJpbmRleCIsImRhdGEiLCJPYmplY3QiLCJkYXRlU2VuZGVkIiwiRGF0ZSIsIm5vdyIsInJlY2VpdmVkIiwiQm9vbGVhbiIsInJlYWRlZCIsImxpa2VzIiwiU3RyaW5nIiwidW5saWtlcyIsImRlc3RpbmF0aW9uIiwicmVmUGF0aCIsImRlc3RpbmF0aW9uTW9kZWwiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJpc0RlbGV0ZWQiLCJwcmUiLCJuZXh0IiwiY3VycmVudERhdGUiLCJkYiIsIm1vZGVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFDQSxJQUFNQSxNQUFNLEdBQUdDLHFCQUFTRCxNQUF4QjtBQUVBLElBQU1FLGFBQWEsR0FBRyxJQUFJRixNQUFKLENBQVc7QUFDN0JHLEVBQUFBLE1BQU0sRUFBRTtBQUFDQyxJQUFBQSxJQUFJLEVBQUVKLE1BQU0sQ0FBQ0ssS0FBUCxDQUFhQyxRQUFwQjtBQUE4QkMsSUFBQUEsR0FBRyxFQUFFLE1BQW5DO0FBQTJDQyxJQUFBQSxRQUFRLEVBQUUsSUFBckQ7QUFBMkRDLElBQUFBLEtBQUssRUFBRTtBQUFsRSxHQURxQjtBQUU3QkMsRUFBQUEsSUFBSSxFQUFFO0FBQUNOLElBQUFBLElBQUksRUFBRU8sTUFBUDtBQUFlSCxJQUFBQSxRQUFRLEVBQUU7QUFBekIsR0FGdUI7QUFHN0JJLEVBQUFBLFVBQVUsRUFBRTtBQUFDUixJQUFBQSxJQUFJLEVBQUVTLElBQVA7QUFBYSxlQUFTQSxJQUFJLENBQUNDLEdBQTNCO0FBQWdDTixJQUFBQSxRQUFRLEVBQUU7QUFBMUMsR0FIaUI7QUFJN0JPLEVBQUFBLFFBQVEsRUFBRTtBQUFDWCxJQUFBQSxJQUFJLEVBQUVZLE9BQVA7QUFBZ0IsZUFBUyxLQUF6QjtBQUFnQ1IsSUFBQUEsUUFBUSxFQUFFO0FBQTFDLEdBSm1CO0FBSzdCUyxFQUFBQSxNQUFNLEVBQUU7QUFBQ2IsSUFBQUEsSUFBSSxFQUFFWSxPQUFQO0FBQWdCLGVBQVMsS0FBekI7QUFBZ0NSLElBQUFBLFFBQVEsRUFBRTtBQUExQyxHQUxxQjtBQU03QlUsRUFBQUEsS0FBSyxFQUFHLENBQUM7QUFBQ2QsSUFBQUEsSUFBSSxFQUFFZTtBQUFQLEdBQUQsQ0FOcUI7QUFPN0JDLEVBQUFBLE9BQU8sRUFBRyxDQUFDO0FBQUNoQixJQUFBQSxJQUFJLEVBQUVlO0FBQVAsR0FBRCxDQVBtQjtBQVE3QkUsRUFBQUEsV0FBVyxFQUFFO0FBQUNqQixJQUFBQSxJQUFJLEVBQUVKLE1BQU0sQ0FBQ0ssS0FBUCxDQUFhQyxRQUFwQjtBQUE4QkUsSUFBQUEsUUFBUSxFQUFFLElBQXhDO0FBQStDYyxJQUFBQSxPQUFPLEVBQUUsa0JBQXhEO0FBQTRFYixJQUFBQSxLQUFLLEVBQUU7QUFBbkYsR0FSZ0I7QUFTN0JjLEVBQUFBLGdCQUFnQixFQUFFO0FBQ2RuQixJQUFBQSxJQUFJLEVBQUVlLE1BRFE7QUFFZCxZQUFNLENBQUMsTUFBRCxFQUFTLE9BQVQ7QUFGUSxHQVRXO0FBYTdCSyxFQUFBQSxTQUFTLEVBQUVYLElBYmtCO0FBYzdCWSxFQUFBQSxTQUFTLEVBQUVaLElBZGtCO0FBZTdCYSxFQUFBQSxTQUFTLEVBQUc7QUFBQ3RCLElBQUFBLElBQUksRUFBRVksT0FBUDtBQUFnQixlQUFTLEtBQXpCO0FBQWdDUixJQUFBQSxRQUFRLEVBQUU7QUFBMUM7QUFmaUIsQ0FBWCxDQUF0QjtBQWtCQU4sYUFBYSxDQUFDeUIsR0FBZCxDQUFrQixNQUFsQixFQUEwQixVQUFTQyxJQUFULEVBQWU7QUFDckMsTUFBSUMsV0FBVyxHQUFHLElBQUloQixJQUFKLEVBQWxCO0FBQ0EsT0FBS1ksU0FBTCxHQUFpQkksV0FBakI7QUFDQSxNQUFJLENBQUMsS0FBS0wsU0FBVixFQUNJLEtBQUtBLFNBQUwsR0FBaUJLLFdBQWpCO0FBQ0pELEVBQUFBLElBQUk7QUFDUCxDQU5EOztlQVFnQixrQkFBQUUsRUFBRSxFQUFJO0FBQUVBLEVBQUFBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTLFNBQVQsRUFBb0I3QixhQUFwQjtBQUFtQyxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hO1xyXG5cclxuY29uc3QgbWVzc2FnZVNjaGVtYSA9IG5ldyBTY2hlbWEoe1xyXG4gICAgYXV0aG9yOiB7dHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdVc2VyJywgcmVxdWlyZWQ6IHRydWUsIGluZGV4OiB0cnVlfSxcclxuICAgIGRhdGE6IHt0eXBlOiBPYmplY3QsIHJlcXVpcmVkOiB0cnVlfSxcclxuICAgIGRhdGVTZW5kZWQ6IHt0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdywgcmVxdWlyZWQ6IHRydWV9LCBcclxuICAgIHJlY2VpdmVkOiB7dHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgLHJlcXVpcmVkOiB0cnVlfSxcclxuICAgIHJlYWRlZDoge3R5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlICxyZXF1aXJlZDogdHJ1ZX0sXHJcbiAgICBsaWtlczogIFt7dHlwZTogU3RyaW5nfV0sXHJcbiAgICB1bmxpa2VzOiAgW3t0eXBlOiBTdHJpbmd9XSxcclxuICAgIGRlc3RpbmF0aW9uOiB7dHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZXF1aXJlZDogdHJ1ZSwgIHJlZlBhdGg6ICdkZXN0aW5hdGlvbk1vZGVsJywgaW5kZXg6IHRydWV9LFxyXG4gICAgZGVzdGluYXRpb25Nb2RlbDoge1xyXG4gICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICBlbnVtOiBbJ1VzZXInLCAnR3JvdXAnXVxyXG4gICAgfSxcclxuICAgIGNyZWF0ZWRBdDogRGF0ZSxcclxuICAgIHVwZGF0ZWRBdDogRGF0ZSxcclxuICAgIGlzRGVsZXRlZDogIHt0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSAscmVxdWlyZWQ6IHRydWV9LFxyXG59KTtcclxuXHJcbm1lc3NhZ2VTY2hlbWEucHJlKCdzYXZlJywgZnVuY3Rpb24obmV4dCkge1xyXG4gICAgbGV0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgIHRoaXMudXBkYXRlZEF0ID0gY3VycmVudERhdGU7XHJcbiAgICBpZiAoIXRoaXMuY3JlYXRlZEF0KVxyXG4gICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gY3VycmVudERhdGU7XHJcbiAgICBuZXh0KCk7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgIGRiID0+IHsgZGIubW9kZWwoJ01lc3NhZ2UnLCBtZXNzYWdlU2NoZW1hKX1cclxuIl19