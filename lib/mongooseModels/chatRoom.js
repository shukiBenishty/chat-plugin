"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _mongoose = _interopRequireDefault(require("mongoose"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var Schema = _mongoose["default"].Schema;
var chatRoomSchema = new Schema({
  subscribers: [{
    type: Schema.Types.ObjectId,
    ref: 'User'
  }],
  messages: [{
    type: Schema.Types.ObjectId,
    ref: 'Message'
  }],
  createdAt: Date,
  updatedAt: Date
});
chatRoomSchema.pre('save', function (next) {
  var currentDate = new Date();
  this.updatedAt = currentDate;
  if (!this.createdAt) this.createdAt = currentDate;
  next();
});

var _default = function _default(db) {
  db.model('ChatRoom', chatRoomSchema);
};

exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb25nb29zZU1vZGVscy9jaGF0Um9vbS5qcyJdLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsImNoYXRSb29tU2NoZW1hIiwic3Vic2NyaWJlcnMiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsIm1lc3NhZ2VzIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsInByZSIsIm5leHQiLCJjdXJyZW50RGF0ZSIsImRiIiwibW9kZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUNBLElBQU1BLE1BQU0sR0FBR0MscUJBQVNELE1BQXhCO0FBRUEsSUFBTUUsY0FBYyxHQUFHLElBQUlGLE1BQUosQ0FBVztBQUM5QkcsRUFBQUEsV0FBVyxFQUFFLENBQUM7QUFBQ0MsSUFBQUEsSUFBSSxFQUFFSixNQUFNLENBQUNLLEtBQVAsQ0FBYUMsUUFBcEI7QUFBOEJDLElBQUFBLEdBQUcsRUFBRTtBQUFuQyxHQUFELENBRGlCO0FBRTlCQyxFQUFBQSxRQUFRLEVBQUUsQ0FBQztBQUFDSixJQUFBQSxJQUFJLEVBQUVKLE1BQU0sQ0FBQ0ssS0FBUCxDQUFhQyxRQUFwQjtBQUE4QkMsSUFBQUEsR0FBRyxFQUFFO0FBQW5DLEdBQUQsQ0FGb0I7QUFHOUJFLEVBQUFBLFNBQVMsRUFBRUMsSUFIbUI7QUFJOUJDLEVBQUFBLFNBQVMsRUFBRUQ7QUFKbUIsQ0FBWCxDQUF2QjtBQVFBUixjQUFjLENBQUNVLEdBQWYsQ0FBbUIsTUFBbkIsRUFBMkIsVUFBU0MsSUFBVCxFQUFlO0FBQ3RDLE1BQUlDLFdBQVcsR0FBRyxJQUFJSixJQUFKLEVBQWxCO0FBQ0EsT0FBS0MsU0FBTCxHQUFpQkcsV0FBakI7QUFDQSxNQUFJLENBQUMsS0FBS0wsU0FBVixFQUNJLEtBQUtBLFNBQUwsR0FBaUJLLFdBQWpCO0FBQ0pELEVBQUFBLElBQUk7QUFDUCxDQU5EOztlQVFnQixrQkFBQUUsRUFBRSxFQUFJO0FBQUVBLEVBQUFBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTLFVBQVQsRUFBcUJkLGNBQXJCO0FBQXFDLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xyXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XHJcblxyXG5jb25zdCBjaGF0Um9vbVNjaGVtYSA9IG5ldyBTY2hlbWEoe1xyXG4gICAgc3Vic2NyaWJlcnM6IFt7dHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdVc2VyJ31dLFxyXG4gICAgbWVzc2FnZXM6IFt7dHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdNZXNzYWdlJ31dLFxyXG4gICAgY3JlYXRlZEF0OiBEYXRlLFxyXG4gICAgdXBkYXRlZEF0OiBEYXRlXHJcblxyXG59KTtcclxuXHJcbmNoYXRSb29tU2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uKG5leHQpIHtcclxuICAgIGxldCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICB0aGlzLnVwZGF0ZWRBdCA9IGN1cnJlbnREYXRlO1xyXG4gICAgaWYgKCF0aGlzLmNyZWF0ZWRBdClcclxuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IGN1cnJlbnREYXRlO1xyXG4gICAgbmV4dCgpO1xyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0ICBkYiA9PiB7IGRiLm1vZGVsKCdDaGF0Um9vbScsIGNoYXRSb29tU2NoZW1hKX0iXX0=