"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _mongoose = _interopRequireDefault(require("mongoose"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var Schema = _mongoose["default"].Schema;
var groupSchema = new Schema({
  name: String,
  picture: {
    type: String,
    "default": ""
  },
  subscribers: [{
    type: Schema.Types.ObjectId,
    ref: 'User'
  }],
  messages: [{
    type: Schema.Types.ObjectId,
    ref: 'Message'
  }],
  createdAt: Date,
  updatedAt: Date
});
groupSchema.pre('save', function (next) {
  var currentDate = new Date();
  this.updatedAt = currentDate;
  if (!this.createdAt) this.createdAt = currentDate;
  next();
});

var _default = function _default(db) {
  db.model('Group', groupSchema);
};

exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb25nb29zZU1vZGVscy9ncm91cC5qcyJdLCJuYW1lcyI6WyJTY2hlbWEiLCJtb25nb29zZSIsImdyb3VwU2NoZW1hIiwibmFtZSIsIlN0cmluZyIsInBpY3R1cmUiLCJ0eXBlIiwic3Vic2NyaWJlcnMiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwibWVzc2FnZXMiLCJjcmVhdGVkQXQiLCJEYXRlIiwidXBkYXRlZEF0IiwicHJlIiwibmV4dCIsImN1cnJlbnREYXRlIiwiZGIiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBQ0EsSUFBTUEsTUFBTSxHQUFHQyxxQkFBU0QsTUFBeEI7QUFFQSxJQUFNRSxXQUFXLEdBQUcsSUFBSUYsTUFBSixDQUFXO0FBQzNCRyxFQUFBQSxJQUFJLEVBQUVDLE1BRHFCO0FBRTNCQyxFQUFBQSxPQUFPLEVBQUU7QUFBRUMsSUFBQUEsSUFBSSxFQUFFRixNQUFSO0FBQWdCLGVBQVM7QUFBekIsR0FGa0I7QUFHM0JHLEVBQUFBLFdBQVcsRUFBRSxDQUFDO0FBQUNELElBQUFBLElBQUksRUFBRU4sTUFBTSxDQUFDUSxLQUFQLENBQWFDLFFBQXBCO0FBQThCQyxJQUFBQSxHQUFHLEVBQUU7QUFBbkMsR0FBRCxDQUhjO0FBSTNCQyxFQUFBQSxRQUFRLEVBQUUsQ0FBQztBQUFDTCxJQUFBQSxJQUFJLEVBQUVOLE1BQU0sQ0FBQ1EsS0FBUCxDQUFhQyxRQUFwQjtBQUE4QkMsSUFBQUEsR0FBRyxFQUFFO0FBQW5DLEdBQUQsQ0FKaUI7QUFLM0JFLEVBQUFBLFNBQVMsRUFBRUMsSUFMZ0I7QUFNM0JDLEVBQUFBLFNBQVMsRUFBRUQ7QUFOZ0IsQ0FBWCxDQUFwQjtBQVVBWCxXQUFXLENBQUNhLEdBQVosQ0FBZ0IsTUFBaEIsRUFBd0IsVUFBU0MsSUFBVCxFQUFlO0FBQ25DLE1BQUlDLFdBQVcsR0FBRyxJQUFJSixJQUFKLEVBQWxCO0FBQ0EsT0FBS0MsU0FBTCxHQUFpQkcsV0FBakI7QUFDQSxNQUFJLENBQUMsS0FBS0wsU0FBVixFQUNJLEtBQUtBLFNBQUwsR0FBaUJLLFdBQWpCO0FBQ0pELEVBQUFBLElBQUk7QUFDUCxDQU5EOztlQVFnQixrQkFBQUUsRUFBRSxFQUFJO0FBQUVBLEVBQUFBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTLE9BQVQsRUFBa0JqQixXQUFsQjtBQUErQixDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcclxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hO1xyXG5cclxuY29uc3QgZ3JvdXBTY2hlbWEgPSBuZXcgU2NoZW1hKHtcclxuICAgIG5hbWU6IFN0cmluZyxcclxuICAgIHBpY3R1cmU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBcIlwiIH0sXHJcbiAgICBzdWJzY3JpYmVyczogW3t0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ1VzZXInfV0sXHJcbiAgICBtZXNzYWdlczogW3t0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ01lc3NhZ2UnfV0sXHJcbiAgICBjcmVhdGVkQXQ6IERhdGUsXHJcbiAgICB1cGRhdGVkQXQ6IERhdGVcclxuXHJcbn0pO1xyXG5cclxuZ3JvdXBTY2hlbWEucHJlKCdzYXZlJywgZnVuY3Rpb24obmV4dCkge1xyXG4gICAgbGV0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuICAgIHRoaXMudXBkYXRlZEF0ID0gY3VycmVudERhdGU7XHJcbiAgICBpZiAoIXRoaXMuY3JlYXRlZEF0KVxyXG4gICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gY3VycmVudERhdGU7XHJcbiAgICBuZXh0KCk7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgIGRiID0+IHsgZGIubW9kZWwoJ0dyb3VwJywgZ3JvdXBTY2hlbWEpfSJdfQ==